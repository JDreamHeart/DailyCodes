# 说明文档

----
## App与后端的数据交互
当请求webSocket连接失败，或者关闭时，设置定时器，定时请求连接webSocket，直到连接成功后，停止定时器。  
  * 进入App时，向服务端请求webSocket连接，后端生成uuid，并返回给app端进行保存。
  * 检测App是否有保存玩家登录信息，有的话，将uuid和玩家登录信息，请求后端。
  * 后端根据玩家登录信息，判断是否有已使用相同账号登录的app客户端，有的话强制下线（断开相应的webSocket）已登录app端；
  * 后端将uuid和对应玩家信息进行绑定，返回结果给当前登录的app端。

## 二维码登录
### 步骤
网页操作：  
  * 网页打开登录二维码按钮，向服务端请求webSocket连接。
  * 从cookie中获取此前获取过的二维码的uuid值，并请求服务端。
  * 服务端验证uuid是否有效，若无效则新生成uuid，并生产二维码，返回uuid和二维码给客户端。
  * 客户端保存uuid到cookie中，并显示二维码。

App操作：  
  * App扫描二维码，先校验有没有登录，若未登录，则直接跳转登录页面，否则进行下一步骤。
  * 将登录后的玩家token发到二维码对应的网址。

后端操作：  
  * 后端收到App的请求信息，将用户信息发送给对应网页客户端，同时关闭相应的webSocket。
  * 后端发送信息之后，通知App，“网页登录成功”。